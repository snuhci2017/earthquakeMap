<!doctype html>
<html>

<head>
    <title>Earthquake Data Analysis Tool</title>
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="../../lib/d3.v3.min.js" charset="utf-8"></script>
    <script src="../js/common.js" charset="utf-8"></script>
    <script src="../js/scatterplot.js" charset="utf-8"></script>
    <script src="../js/barchart.js" charset="utf-8"></script>
</head>

<body>
    <div>
        <nav>
            <p>Add range selection bars for period and magnitude.</p>

        </nav>
        <section style="width: 100%">
            <table id="main-interface">
                <tr>
                    <td id="epicenter-plot"></td>
                    <td id="yearly-statistics"></td>
                </tr>
                <tr>
                    <td>
                        <button onclick="update()">Update Charts</button>
                    </td>
                    <td>
                        <p>mean(magnitude) = <span id="mean-magnitude"></span>, #(occurrence) = <span id="num-occurrences"></span></p>
                    </td>
                </tr>
            </table>
        </section>
        <aside>

        </aside>

    </div>
    <script>
        var year = 1978;

        $(document).ready(function() {
            var filtered = filterRecords(records, year, year + 5, 5.0, 7.0);
            console.log(filtered);
            setupEpicenterMap(ColorRule, RadiusRule);
            setupBarChart();
            updateEpicenterMap(filtered);
            updateBarChart(filtered, year, year + 5);
            year++;
        });

        function update() {
            filtered = filterRecords(records, year, year + 40, 1.0, 7.0);
            updateEpicenterMap(filtered);
            updateBarChart(filtered, year, year + 40);
            if (year + 5 < 2017)
                year++;
        }
    </script>
</body>

</html>